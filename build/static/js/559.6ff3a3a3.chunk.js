"use strict";(self.webpackChunkespressit_social_media_app=self.webpackChunkespressit_social_media_app||[]).push([[559],{448:function(t,e,s){s(2791);e.Z=s.p+"static/media/close.fabc6ea21c817cc4963edd0088b74410.svg"},559:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var n=s(4165),a=s(2982),i=s(5861),r=s(885),o=s(2791),c=s(184),u=function(t){var e=t.handleFormSubmission;return(0,c.jsx)("div",{className:"create-post-text-container",children:(0,c.jsx)("form",{className:"create-post-form",onSubmit:function(t){return e(t)},children:(0,c.jsxs)("fieldset",{className:"create-post-fieldset",children:[(0,c.jsx)("label",{htmlFor:"text-body-input",className:"text-body-label",children:"Paint the picture for us:"}),(0,c.jsx)("textarea",{id:"text-body-input",className:"text-body-input",placeholder:"So there I was... fighting the spiders"}),(0,c.jsx)("button",{className:"post-submit-button",type:"submit",children:"Post"})]})})})};var l=s.p+"static/media/image.0087f96340c2affaf0f75083d3689173.svg";var p=s.p+"static/media/link.d976018452207b11b7638f9f01d4a57d.svg";var d=s.p+"static/media/tamper.bb28ccb0cfb910ceb6ad891e8a70e048.svg";var m=s.p+"static/media/text.5eed8b14a5f416722e9b7103a514e84a.svg",f=function(t){var e=t.handlePostType;return(0,c.jsxs)("div",{className:"create-post-container",children:[(0,c.jsx)("img",{className:"create-post-tamper-img",src:d,alt:"profile"}),(0,c.jsx)("input",{className:"create-post-text-input",onFocus:function(){return e({text:!0})},placeholder:"Title of Post"}),(0,c.jsx)("button",{type:"button",className:"create-post-insert-text",children:(0,c.jsx)("img",{className:"create-post-svg",src:m,alt:"text icon",onClick:function(){return e({text:!0})}})}),(0,c.jsx)("button",{type:"button",className:"create-post-insert-img",children:(0,c.jsx)("img",{className:"create-post-svg",src:l,alt:" img icon",onClick:function(){return e({img:!0})}})}),(0,c.jsx)("button",{type:"button",className:"create-post-insert-link",children:(0,c.jsx)("img",{className:"create-post-svg",src:p,alt:"link icon",onClick:function(){return e({link:!0})}})})]})},h=s(4191),x=s.n(h),g=s(9062),b=s(2426),v=s(4453),y=s(448),k=function(t){var e=t.user,s=t.fetchNewPost,l=(0,o.useState)({status:!1,type:""}),p=(0,r.Z)(l,2),d=p[0],m=p[1],h=(0,o.useState)(),k=(0,r.Z)(h,2),j=k[0],w=k[1],N=function(t){t.text?m({status:!0,type:"text"}):t.img?m({status:!0,type:"img"}):t.link&&m({status:!0,type:"link"})},Z=function(){m({status:!1,type:""})},S=function(t){t.preventDefault();var s=e,n=(0,b.ZF)({apiKey:"AIzaSyDsPecBa3Ch5uDw4UzHiJWAjKEYOKCrNdA",authDomain:"espressit.firebaseapp.com",projectId:"espressit",storageBucket:"espressit.appspot.com",messagingSenderId:"1094129721341",appId:"1:1094129721341:web:dc2bdc0a2b322504b04394"}),a=(0,g.ad)(n),i=document.querySelector(".create-post-text-input").value,r=document.querySelector("#text-body-input").value;if("text"===d.type)return C(s,a,i,r),void Z();if("img"===d.type)return L(s,a,i,r),void Z();if("link"===d.type){var o=document.querySelector(".insert-link-input").value;return U(s,a,i,r,o),void Z()}},C=function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e,i,r,o){var c,u,l,p;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=x()(),u=(0,g.JU)(i,"users",e.uid),t.next=4,(0,g.QT)(u);case 4:if(!(l=t.sent).exists()){t.next=11;break}return p={account:l.data().username,author:e.uid,body:o,comments:[],dislikes:0,imgURL:"",imgURLRef:"",likes:1,link:"",pid:c,time:(new Date).toLocaleString(),title:r,views:0,whoDisliked:[],whoLiked:[e.uid]},t.next=9,(0,g.r7)(u,{posts:[].concat((0,a.Z)(l.data().posts),[p])});case 9:return t.next=11,(0,g.pl)((0,g.JU)(i,"posts",c),p);case 11:s();case 13:case"end":return t.stop()}}),t)})));return function(e,s,n,a){return t.apply(this,arguments)}}(),L=function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e,r,o,c){var u,l,p;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=x()(),l=(0,v.cF)(),p=(0,v.iH)(l,"postImgs/".concat(j.name)),void 0!==j&&(0,v.KV)(p,j).then((function(t){(0,v.Jt)((0,v.iH)(l,"postImgs/".concat(j.name))).then((function(t){!function(){var l=(0,i.Z)((0,n.Z)().mark((function i(){var l,p,d;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=(0,g.JU)(r,"users",e.uid),n.next=3,(0,g.QT)(l);case 3:if(!(p=n.sent).exists()){n.next=10;break}return d={account:e.uid,author:p.data().username,body:c,comments:[],dislikes:0,imgURL:t,imgURLRef:"postImgs/".concat(j.name),likes:1,link:"",pid:u,time:(new Date).toLocaleString(),title:o,views:0,whoDisliked:[],whoLiked:[e.uid]},n.next=8,(0,g.r7)(l,{posts:[].concat((0,a.Z)(p.data().posts),[d])});case 8:return n.next=10,(0,g.pl)((0,g.JU)(r,"posts",u),d);case 10:s();case 12:case"end":return n.stop()}}),i)})));return function(){return l.apply(this,arguments)}}()()})).catch((function(t){alert("We were not able to attach the picture you uploaded to your post, please try again later"),(0,v.oq)(p).then((function(){})).catch((function(t){alert("We were not able to delete the picture you uploaded and it is not connected to anything, please reach out to dutsandrew@gmail.com if you see this message")}))}))})).catch((function(){alert("your image was not uploaded to the server so we cancelled the post upload, please try again later")}));case 3:case"end":return t.stop()}}),t)})));return function(e,s,n,a){return t.apply(this,arguments)}}(),U=function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e,i,r,o,c){var u,l,p,d;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=x()(),l=(0,g.JU)(i,"users",e.uid),t.next=4,(0,g.QT)(l);case 4:if(!(p=t.sent).exists()){t.next=11;break}return d={account:p.data().username,author:e.uid,body:o,comments:[],dislikes:0,imgURL:"",imgURLRef:"",likes:1,link:c,pid:u,time:(new Date).toLocaleString(),title:r,views:0,whoDisliked:[],whoLiked:[e.uid]},t.next=9,(0,g.r7)(l,{posts:[].concat((0,a.Z)(p.data().posts),[d])});case 9:return t.next=11,(0,g.pl)((0,g.JU)(i,"posts",u),d);case 11:s();case 13:case"end":return t.stop()}}),t)})));return function(e,s,n,a,i){return t.apply(this,arguments)}}();return!0===d.status&&"text"===d.type?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"close-form-button",type:"button",onClick:Z,children:(0,c.jsx)("img",{className:"close-button-svg",src:y.Z,alt:"close svg"})}),(0,c.jsx)(f,{handlePostType:N}),(0,c.jsx)(u,{handleFormSubmission:S})]}):!0===d.status&&"img"===d.type?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"close-form-button",type:"button",onClick:Z,children:(0,c.jsx)("img",{className:"close-button-svg",src:y.Z,alt:"close svg"})}),(0,c.jsx)(f,{handlePostType:N}),(0,c.jsx)("div",{className:"create-post-img-container",children:(0,c.jsx)("input",{className:"insert-image-input",type:"file",accept:"/image/*",onChange:function(t){return function(t){t.target.files&&w(t.target.files[0])}(t)}})}),(0,c.jsx)(u,{handleFormSubmission:S})]}):!0===d.status&&"link"===d.type?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"close-form-button",type:"button",onClick:Z,children:(0,c.jsx)("img",{className:"close-button-svg",src:y.Z,alt:"close svg"})}),(0,c.jsx)(f,{handlePostType:N}),(0,c.jsx)("div",{className:"create-post-link-container",children:(0,c.jsx)("input",{className:"insert-link-input",type:"url",placeholder:"Insert Link here",onChange:function(){var t=document.querySelector(".insert-link-input"),e=document.querySelector(".error-text-post-input");!1===t.validity.valid&&e&&(e.textContent="Your link must have: 1) https:// 2) URL 3) .com, .net, .org, or other website ending",setTimeout((function(){e.textContent=""}),1e4))}})}),(0,c.jsx)("p",{className:"error-text-post-input"}),(0,c.jsx)(u,{handleFormSubmission:S})]}):(0,c.jsx)(f,{handlePostType:N})}}}]);
//# sourceMappingURL=559.6ff3a3a3.chunk.js.map